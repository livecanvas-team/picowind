import{a as e,c as t,d as n,f as r,g as i,h as a,i as o,l as s,m as c,n as l,o as u,p as d,r as f,s as p,t as m,u as h}from"./admin-CpOqB3vT.js";var g=function e(t){function n(e,t,r){var i,a={};if(Array.isArray(e))return e.concat(t);for(i in e)a[r?i.toLowerCase():i]=e[i];for(i in t){var o=r?i.toLowerCase():i,s=t[i];a[o]=o in a&&typeof s==`object`?n(a[o],s,o==`headers`):s}return a}function r(e,r,i,a,o){var s=typeof e==`string`?e:(r=e).url,c={config:r},l=n(t,r),u={};a||=l.data,(l.transformRequest||[]).map(function(e){a=e(a,l.headers)||a}),l.auth&&(u.authorization=l.auth),a&&typeof a==`object`&&typeof a.append!=`function`&&typeof a.text!=`function`&&(a=JSON.stringify(a),u[`content-type`]=`application/json`);try{u[l.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp(`(^|; )`+l.xsrfCookieName+`=([^;]*)`))[2])}catch{}return l.baseURL&&(s=s.replace(/^(?!.*\/\/)\/?/,l.baseURL+`/`)),l.params&&(s+=(~s.indexOf(`?`)?`&`:`?`)+(l.paramsSerializer?l.paramsSerializer(l.params):new URLSearchParams(l.params))),(l.fetch||fetch)(s,{method:(i||l.method||`get`).toUpperCase(),body:a,headers:n(l.headers,u,!0),credentials:l.withCredentials?`include`:o}).then(function(e){for(var t in e)typeof e[t]!=`function`&&(c[t]=e[t]);return l.responseType==`stream`?(c.data=e.body,c):e[l.responseType||`text`]().then(function(e){c.data=e,c.data=JSON.parse(e)}).catch(Object).then(function(){return(l.validateStatus?l.validateStatus(e.status):e.ok)?c:Promise.reject(c)})})}return t||={},r.request=r,r.get=function(e,t){return r(e,t,`get`)},r.delete=function(e,t){return r(e,t,`delete`)},r.head=function(e,t){return r(e,t,`head`)},r.options=function(e,t){return r(e,t,`options`)},r.post=function(e,t,n){return r(e,n,`post`,t)},r.put=function(e,t,n){return r(e,n,`put`,t)},r.patch=function(e,t,n){return r(e,n,`patch`,t)},r.all=Promise.all.bind(Promise),r.spread=function(e){return e.apply.bind(e,e)},r.CancelToken=typeof AbortController==`function`?AbortController:Object,r.defaults=t,r.create=e,r}(),_;function v(e={}){return _||=g.create(Object.assign({baseURL:window.picowind.rest_api.url||``,headers:{"content-type":`application/json`,accept:`application/json`,"X-WP-Nonce":window.picowind.rest_api.nonce||``}},e)),_}const y=m(`onboarding`,()=>{let e=v(),t=d(!1),n=d(!1),r=d(!1),i=d(null),a=d([]),s=d([]),c=d(null),l=o(()=>i.value?.completed||!1),u=o(()=>i.value?.hasChildTheme||!1),f=o(()=>a.value.find(e=>e.active)||null);async function p(){try{return t.value=!0,c.value=null,i.value=(await e.get(`/onboarding/status`)).data.data,i.value}catch(e){throw c.value=e.response?.data?.message||`Failed to fetch onboarding status`,e}finally{t.value=!1}}async function m(){try{t.value=!0,c.value=null;let n=await e.get(`/onboarding/themes`);return a.value=Array.isArray(n.data.data)?n.data.data:[],a.value}catch(e){throw c.value=e.response?.data?.message||`Failed to fetch bundled themes`,e}finally{t.value=!1}}async function h(){try{t.value=!0,c.value=null;let n=await e.get(`/onboarding/plugins`);return s.value=Array.isArray(n.data.data)?n.data.data:[],s.value}catch(e){throw c.value=e.response?.data?.message||`Failed to fetch recommended plugins`,e}finally{t.value=!1}}async function g(t){try{return n.value=!0,c.value=null,(await e.post(`/onboarding/install-theme`,{themeId:t})).data}catch(e){throw c.value=e.response?.data?.message||e.message||`Failed to install theme`,e}finally{n.value=!1}}async function _(t){try{return r.value=!0,c.value=null,(await e.post(`/onboarding/activate-theme`,{themeSlug:t})).data}catch(e){throw c.value=e.response?.data?.message||e.message||`Failed to activate theme`,e}finally{r.value=!1}}async function y(t){try{return n.value=!0,c.value=null,(await e.post(`/onboarding/install-plugin`,{slug:t})).data}catch(e){throw c.value=e.response?.data?.message||e.message||`Failed to install plugin`,e}finally{n.value=!1}}async function b(t){try{return r.value=!0,c.value=null,(await e.post(`/onboarding/activate-plugin`,{slug:t})).data}catch(e){throw c.value=e.response?.data?.message||e.message||`Failed to activate plugin`,e}finally{r.value=!1}}async function x(){try{c.value=null;let t=await e.post(`/onboarding/complete`);return t.data.success&&i.value&&(i.value.completed=!0),t.data}catch(e){throw c.value=e.response?.data?.message||`Failed to complete onboarding`,e}}async function S(){try{c.value=null;let t=await e.post(`/onboarding/reset`);return t.data.success&&(i.value=null,await Promise.all([p(),m(),h()])),t.data}catch(e){throw c.value=e.response?.data?.message||`Failed to reset onboarding`,e}}function C(){c.value=null}return{loading:t,installing:n,activating:r,status:i,bundledThemes:a,recommendedPlugins:s,error:c,isCompleted:l,hasChildTheme:u,activeTheme:f,fetchStatus:p,fetchThemes:m,fetchPlugins:h,installTheme:g,activateTheme:_,installPlugin:y,activatePlugin:b,complete:x,reset:S,clearError:C}});var b={class:`min-h-[calc(100vh-200px)] bg-neutral-50 p-8`},x={class:`mx-auto flex max-w-6xl flex-col gap-10`},S={class:`rounded-2xl border border-neutral-200 bg-white p-8 shadow-sm`},C={key:0,class:`mt-6 rounded-lg border border-green-300 bg-green-50 px-4 py-3 text-sm text-green-800`},ee={key:1,class:`mt-4 rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700`},te={class:`rounded-2xl border border-neutral-200 bg-white p-8 shadow-sm`},ne={class:`flex flex-col gap-4 md:flex-row md:items-center md:justify-between`},re={class:`flex flex-wrap items-center gap-3`},ie={class:`text-xs uppercase tracking-[0.3em] text-neutral-400`},ae={key:0,class:`rounded-md border border-sky-200 px-4 py-2 text-xs font-semibold text-sky-700`},oe={key:0,class:`mt-8 flex items-center justify-center py-12`},se={key:1,class:`mt-8 rounded-md border border-dashed border-neutral-200 bg-neutral-50 p-8 text-center text-sm text-neutral-600`},ce={key:2,class:`mt-8 grid gap-6 md:grid-cols-2`},le={class:`flex items-start justify-between gap-4`},w={class:`flex`},T={class:`flex flex-1 text-lg font-semibold text-neutral-900`},E={class:`flex flex-wrap items-center justify-end gap-2`},D={key:0,class:`rounded-md border border-green-700 px-2.5 py-1 text-xs font-semibold text-green-700`},O={key:1,class:`rounded-md border border-neutral-700 px-2.5 py-1 text-xs font-semibold text-neutral-700`},k={key:2,class:`rounded-md border border-amber-700 px-2.5 py-1 text-xs font-semibold text-amber-700`},A={class:`mt-2 text-sm text-neutral-600`},j={class:`mt-4 flex flex-wrap gap-4 text-xs text-neutral-500`},M={key:0},N={key:1},P={class:`mt-6 flex flex-wrap items-center justify-end gap-3`},F=[`onClick`,`disabled`],I=[`onClick`,`disabled`],L={class:`rounded-2xl border border-neutral-200 bg-white p-8 shadow-sm`},R={key:0,class:`mt-8 flex items-center justify-center py-12`},z={key:1,class:`mt-6 grid gap-6 md:grid-cols-3`},B={class:`flex items-start justify-between gap-4`},V={class:`flex items-start justify-between gap-3`},H={class:`flex items-center gap-2`},U={class:`text-lg font-semibold text-neutral-900`},ue=[`href`,`aria-label`,`title`],de={class:`flex flex-wrap items-center justify-end gap-2`},fe={key:0,class:`rounded-md border border-green-700 px-2.5 py-1 text-xs font-semibold text-green-700`},W={key:1,class:`rounded-md border border-neutral-700 px-2.5 py-1 text-xs font-semibold text-neutral-700`},pe={key:2,class:`rounded-md border border-amber-700 px-2.5 py-1 text-xs font-semibold text-amber-700`},me={key:3,class:`rounded-md border border-violet-700 px-2.5 py-1 text-xs font-semibold text-violet-700`},he={class:`mt-2 text-sm text-neutral-600`},ge={class:`mt-6 flex flex-wrap items-center justify-between gap-3`},_e={class:`flex flex-wrap gap-2`},ve=[`href`],ye=[`onClick`,`disabled`],be=[`onClick`,`disabled`],G=s({__name:`Onboarding`,setup(s){let m=y(),{status:g,bundledThemes:_,recommendedPlugins:v,error:G}=l(m),K=d(!0),q=d(null),J=d(null),Y=d(null),X=o(()=>q.value!==null||J.value!==null),xe=o(()=>!!g.value?.childTheme),Se=o(()=>g.value?.childTheme?.name??``);h(async()=>{try{await Z()}finally{K.value=!1}});async function Z(){try{await Promise.all([m.fetchStatus(),m.fetchThemes(),m.fetchPlugins()])}catch{}}function Q(e,t){return q.value?.id===e&&q.value?.type===t}function $(e,t){return J.value?.slug===e&&J.value?.type===t}async function Ce(e){Y.value=null,q.value={id:e,type:`install`};try{Y.value=(await m.installTheme(e))?.message||`Theme installed successfully.`}catch{}finally{await Z(),q.value=null}}async function we(e,t){if(e){Y.value=null,q.value={id:t,type:`activate`};try{Y.value=(await m.activateTheme(e))?.message||`Theme activated successfully.`}catch{}finally{await Z(),q.value=null}}}async function Te(e){Y.value=null,J.value={slug:e,type:`install`};try{Y.value=(await m.installPlugin(e))?.message||`Plugin installed successfully.`}catch{}finally{await Z(),J.value=null}}async function Ee(e){Y.value=null,J.value={slug:e,type:`activate`};try{Y.value=(await m.activatePlugin(e))?.message||`Plugin activated successfully.`}catch{}finally{await Z(),J.value=null}}return(o,s)=>(n(),p(`div`,b,[e(`div`,x,[e(`section`,S,[s[0]||=e(`div`,{class:`flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between`},[e(`div`,null,[e(`p`,{class:`text-xs uppercase tracking-[0.25em] text-neutral-400`},`Onboarding`),e(`h1`,{class:`mt-3 text-3xl font-semibold text-neutral-900`},`Get started with Picowind`),e(`p`,{class:`mt-2 text-sm text-neutral-600`},` Get your site looking great quickly by installing a child theme and some recommended plugins. `)])],-1),Y.value?(n(),p(`div`,C,i(Y.value),1)):u(``,!0),c(G)?(n(),p(`div`,ee,i(c(G)),1)):u(``,!0)]),e(`section`,te,[e(`div`,ne,[s[1]||=e(`div`,null,[e(`h2`,{class:`text-xl font-semibold text-neutral-900`},`Bundled child themes`),e(`p`,{class:`text-sm text-neutral-600`},` Install a bundled child theme or switch to one you already have installed. `)],-1),e(`div`,re,[e(`span`,ie,i(c(_).length)+` bundles`,1),xe.value?(n(),p(`div`,ae,` Active child theme: `+i(Se.value),1)):u(``,!0)])]),K.value?(n(),p(`div`,oe,[...s[2]||=[e(`div`,{class:`text-center`},[e(`div`,{class:`inline-block h-12 w-12 animate-spin rounded-md border-b-2 border-neutral-500`}),e(`p`,{class:`mt-3 text-sm text-neutral-500`},`Loading bundled themes...`)],-1)]])):c(_).length===0&&!c(G)?(n(),p(`div`,se,[...s[3]||=[t(` No bundled child themes were found in `,-1),e(`span`,{class:`font-mono text-neutral-700`},`@child-theme/`,-1),t(`. `,-1)]])):c(_).length>0?(n(),p(`div`,ce,[(n(!0),p(f,null,r(c(_),t=>(n(),p(`article`,{key:t.id,class:a([`flex h-full flex-col justify-between rounded-md border border-neutral-200 p-6 shadow-sm transition hover:border-neutral-300`,t.active?`bg-neutral-100`:``])},[e(`div`,null,[e(`div`,le,[e(`div`,null,[e(`div`,w,[e(`h3`,T,i(t.name),1),e(`div`,E,[t.active?(n(),p(`span`,D,` Active `)):t.installed?(n(),p(`span`,O,` Installed `)):(n(),p(`span`,k,` Not installed `))])]),e(`p`,A,i(t.description||`A bundled child theme for Picowind.`),1)])]),e(`div`,j,[t.version?(n(),p(`span`,M,`Version `+i(t.version),1)):u(``,!0),t.author?(n(),p(`span`,N,`By `+i(t.author),1)):u(``,!0)])]),e(`div`,P,[t.installed?t.active?u(``,!0):(n(),p(`button`,{key:1,onClick:e=>we(t.installedSlug||``,t.id),disabled:!t.installedSlug||X.value,class:`rounded-md px-4 py-2 text-xs font-semibold capitalize tracking-wider transition text-blue-800 hover:text-blue-100 bg-blue-50 hover:bg-blue-700 disabled:cursor-not-allowed disabled:bg-blue-300`},i(Q(t.id,`activate`)?`Switching...`:`Activate`),9,I)):(n(),p(`button`,{key:0,onClick:e=>Ce(t.id),disabled:X.value,class:`rounded-md bg-neutral-100 px-4 py-2 text-xs font-semibold capitalize tracking-wider transition hover:bg-neutral-200 disabled:cursor-not-allowed disabled:bg-neutral-400`},i(Q(t.id,`install`)?`Installing...`:`Install`),9,F))])],2))),128))])):u(``,!0)]),e(`section`,L,[s[7]||=e(`div`,{class:`flex flex-col gap-2 md:flex-row md:items-center md:justify-between`},[e(`div`,null,[e(`h2`,{class:`text-xl font-semibold text-neutral-900`},`Recommended plugins`),e(`p`,{class:`text-sm text-neutral-600`},`These plugins pair perfectly with Picowind.`)])],-1),K.value?(n(),p(`div`,R,[...s[4]||=[e(`div`,{class:`text-center`},[e(`div`,{class:`inline-block h-12 w-12 animate-spin rounded-md border-b-2 border-neutral-500`}),e(`p`,{class:`mt-3 text-sm text-neutral-500`},`Loading recommended plugins...`)],-1)]])):(n(),p(`div`,z,[(n(!0),p(f,null,r(c(v),t=>(n(),p(`article`,{key:t.id,class:a([`flex h-full flex-col justify-between rounded-md border border-neutral-200 p-6 shadow-sm transition hover:border-neutral-300`,t.active?`bg-neutral-100`:``])},[e(`div`,null,[e(`div`,B,[e(`div`,null,[e(`div`,V,[e(`div`,H,[e(`h3`,U,i(t.name),1),t.url?(n(),p(`a`,{key:0,href:t.url,target:`_blank`,rel:`noopener noreferrer`,"aria-label":`Open ${t.name} website`,title:`Open ${t.name} website`,class:`inline-flex h-7 w-7 items-center justify-center rounded-md border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-neutral-400`},[...s[5]||=[e(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`1.5`,class:`h-4 w-4`,"aria-hidden":`true`},[e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,d:`M13.5 4.5h6m0 0v6m0-6L10.5 13.5`}),e(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,d:`M10.5 6H6.75A2.25 2.25 0 0 0 4.5 8.25v9A2.25 2.25 0 0 0 6.75 19.5h9A2.25 2.25 0 0 0 18 17.25V13.5`})],-1)]],8,ue)):u(``,!0)]),e(`div`,de,[t.active?(n(),p(`span`,fe,` Active `)):t.installed?(n(),p(`span`,W,` Installed `)):t.source===`wporg`?(n(),p(`span`,pe,` Not installed `)):(n(),p(`span`,me,` Premium `))])]),e(`p`,he,i(t.description),1)])])]),e(`div`,ge,[s[6]||=e(`p`,{class:`text-xs text-neutral-500`},null,-1),e(`div`,_e,[t.source===`external`&&t.slug!==`livecanvas`?(n(),p(`a`,{key:0,href:t.url,target:`_blank`,rel:`noopener noreferrer`,class:`rounded-md bg-neutral-100 px-4 py-2 text-xs font-semibold capitalize tracking-wider text-neutral-900 transition hover:bg-neutral-200`},` Visit `+i(t.name),9,ve)):t.installed?t.active?u(``,!0):(n(),p(`button`,{key:2,onClick:e=>Ee(t.slug),disabled:X.value,class:`rounded-md px-4 py-2 text-xs font-semibold capitalize tracking-wider transition text-blue-800 hover:text-blue-100 bg-blue-50 hover:bg-blue-700 disabled:cursor-not-allowed disabled:bg-blue-300`},i($(t.slug,`activate`)?`Activating...`:`Activate`),9,be)):(n(),p(`button`,{key:1,onClick:e=>Te(t.slug),disabled:X.value,class:`rounded-md bg-neutral-100 px-4 py-2 text-xs font-semibold capitalize tracking-wider transition hover:bg-neutral-200 disabled:cursor-not-allowed disabled:bg-neutral-400`},i($(t.slug,`install`)?`Installing...`:`Install`),9,ye))])])],2))),128))]))])])]))}});export{G as default};